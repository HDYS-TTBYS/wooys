{% extends 'base.html' %}
{% load static %}

{% block title %}記事詳細{% endblock title %}

{% block head %}
<link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/tomorrow-night-bright.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>
<!-- テキストエディタ「Quilljs」のライブラリ -->
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet" />
<link href="https://cdn.quilljs.com/1.3.6/quill.bubble.css" rel="stylesheet" />
<!-- Quillカスタマイズjs -->
<script type="text/javascript" src="{% static 'detail.js' %}"></script>
<script src="{% static 'get_good_num.js' %}"></script>


{% endblock head %}


{% block contents %}

<div class="container">

    <div class="media text-muted pt-3">
            <div class="logo">
                {% if "{{ article.user.userincluded.img.url }}" %}
                <img class="bd-placeholder-img mr-2 rounded" width="64" height=""
                src="{{ article.user.userincluded.img.url }}" height="64" width="" alt="サンプル画像" align="top">
                {% else %}
                <img class="bd-placeholder-img mr-2 rounded" width="64" height="64"
                src="http://placehold.jp/32x32.png?text=なし" height="32" width="32" alt="サンプル画像" align="top">
                {% endif %}
                {{ article.user }}
            </div>
            <p class="media-body pb-3 mb-0 small lh-125 border-bottom border-gray">
                <strong class="d-block text-gray-dark">{{ article.title }} </strong>
                <br>
                {{ article.created_at }}に作成 {{ article.updated_at }}に更新
            </p>
        
        <button type="button" id="good_button" class="btn btn-primary">
            <span id="good_button_val"></span> <span id="good_num" class="badge badge-light"></span>
        </button>
        <script type="text/javascript">
            getGoodNumButton({{ article.pk }},{{ user.id|default_if_none:"" }});
            document.getElementById("good_button").addEventListener("click", () => {
                clickGoodButton({{ article.pk }},{{ user.id|default_if_none:"" }});
            })
        </script>
    </div>

    <h1>{{ object.title }}</h1>

    <div id="id_content" style="display:none;">{{ object.content }}</div>



    <div id="quill-html"></div>

    <script>
        var data = document.getElementById("id_content").innerHTML
        var quill = QuillPageMake("quill-html", data);
    </script>



    <form class="comment" name="comment" id="comment" method="POST" enctype="multipart/form-data">{% csrf_token %}

        <div id="editor"></div>


        <button class="btn btn-lg btn-primary" id="comment">コメント</button>
    </form>



</div>




{% endblock contents %}
